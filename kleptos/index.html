<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Basic HTML Meta Tags -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ghillie – Kleptos</title>

  <meta name="description"
        content="Kleptos is a fast, simple video downloader that lets you save videos in different formats through a clean, ad-free interface.">
  <link rel="canonical" href="https://ghillie.xyz/kleptos/">

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:site_name" content="Ghillie">
  <meta property="og:url" content="https://ghillie.xyz/kleptos/">
  <meta property="og:title" content="Kleptos – Video Downloader">
  <meta property="og:description"
        content="Use Kleptos to quickly download videos through a minimal, distraction-free interface.">
  <meta property="og:image"
        content="https://ghillie.xyz/assets/img/metaImgs/Meta-Kleptos.png">

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta property="twitter:domain" content="ghillie.xyz">
  <meta property="twitter:url" content="https://ghillie.xyz/kleptos/">
  <meta name="twitter:title" content="Kleptos – Video Downloader | Ghillie">
  <meta name="twitter:description"
        content="Kleptos is a lightweight video downloader with a clean UI and quick, reliable downloads.">
  <meta name="twitter:image"
        content="https://ghillie.xyz/assets/img/metaImgs/Meta-Kleptos.png">

  <!-- Styles & Favicon -->
  <link rel="stylesheet" href="/assets/css/main.css" />
  <link rel="stylesheet" href="/assets/css/kleptos.css" />
  <link rel="shortcut icon" type="image/png" href="/assets/img/favicon.png">
</head>

<body ondragstart="return false">

  <!-- NAVBAR always visible -->
  <div class="main">
    <div class="top_navbar">
      <ul>
        <li><a href="/about/">About</a></li>
        <li><a href="/">Home</a></li>
        <li class="dropdown">
          <a class="has-caret">Portfolio</a>
          <ul class="submenu">
            <li><a href="/portfolio/">Thumbnails</a></li>
            <li><a href="/wordle/">Wordle Solver</a></li>
            <li><a href="/kleptos/" class="nav_active_link">Kleptos</a></li>
            <li><a href="/dbviewer/">DB Viewer</a></li>
          </ul>
        </li>
      </ul>
    </div>
  </div>

  <!-- App -->
  <div id="kleptos">

    <!-- WIP always visible -->
    <div class="workInProgress">
      <h2>Work In Progress</h2>
    </div>

    <!-- LOGGED-OUT VIEW: only this shows -->
    <div id="loginGate" class="loginGate">
      <section class="cardGlow loginCard">
        <div class="loginInner">
          <h1 class="loginTitle">Kleptos</h1>
          <p class="muted loginSub">
            Login with Google to access the downloader.
          </p>

          <div id="authWrap" class="authWrap loginAuthRow">
            <button id="authLogin" class="btn secondary">Login with Google</button>
          </div>

          <div id="loginStatus" class="loginStatus muted"></div>
        </div>
      </section>
    </div>

    <!-- NOT WHITELISTED VIEW: same look as login -->
    <div id="denyGate" class="loginGate" hidden>
      <section class="cardGlow loginCard">
        <div class="loginInner">
          <h1 class="loginTitle">Kleptos</h1>
          <p class="muted loginSub">You are not whitelisted.</p>

          <div class="authWrap loginAuthRow">
            <button id="denyLogout" class="btn secondary" type="button">Sign out</button>
          </div>

          <div id="denyStatus" class="loginStatus muted"></div>
        </div>
      </section>
    </div>

    <!-- LOGGED-IN VIEW: your normal UI -->
    <div id="appGate" hidden>

      <section class="hero">
        <h1>Kleptos Downloader</h1>
        <p class="muted">Paste a URL, Configure your Settings, then Download.</p>
      </section>

      <main class="grid">
        <section class="cardGlow">
          <div>
                        <div class="toolbar">
              <div class="left">
                <button id="settings" class="btn">Settings</button>
                <button id="adminBtn" class="iconBtn" type="button" aria-label="Admin tools" hidden>
                  <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true">
                    <path d="M12 2l7 4v6c0 5-3 9-7 10C8 21 5 17 5 12V6l7-4zm0 3.2L7 7.2V12c0 3.8 2.2 6.9 5 7.9 2.8-1 5-4.1 5-7.9V7.2l-5-2z"/>
                    <path d="M11 11h2v6h-2zM11 8h2v2h-2z"/>
                  </svg>
                </button>
              </div>

              <div class="right">
                <div class="stats">
                  <div class="stat"><span class="label">Downloads Today:</span> <span id="downloadCountToday">0</span> •</div>
                  <div class="stat"><span class="label">Total Downloads:</span> <span id="downloadCountTotal">0</span> •</div>
                  <div class="stat"><span class="label">Tokens:</span> <span id="quotaRemainingInApp">0</span> •</div>
                </div>

                <!-- Profile menu (hover/click) -->
                <div class="profileMenu" id="profileMenu">
                  <button id="profileBtn" class="profileBtn" type="button" aria-haspopup="menu" aria-expanded="false">
                    <img id="profileImg" class="profileImg" alt="Profile" referrerpolicy="no-referrer">
                  </button>
                  
                  <div id="profileDropdown" class="profileDropdown" role="menu">
                    <span class="muted">Signed in:</span>
                    <span id="authEmailInApp" class="authEmail">-</span>
                    <button id="authLogoutInApp" class="btn secondary small" type="button">Logout</button>
                  </div>
                </div>
              </div>
            </div>

            <div class="urlInfo">
              <input class="urlInput" type="url" autocomplete="off" autocapitalize="off" spellcheck="false" inputmode="url" placeholder="Paste URL here...">
              <button id="downloadBtn" class="btn" disabled>Download</button>
            </div>

            <!-- Feedback bars -->
            <div id="metaProgress" class="progress" role="status" aria-live="polite" aria-atomic="true" hidden>
              <div class="bar"><div class="fill"></div></div>
              <span>Collecting data…</span>
            </div>
            <div id="dlProgress" class="progress" role="status" aria-live="polite" aria-atomic="true" hidden>
              <div class="bar"><div class="fill"></div></div>
              <span>Downloading…</span>
            </div>

            <!-- Results -->
            <div class="urlResults" style="display:none">
              <h2></h2>
              <a href="#" target="_blank" rel="noopener noreferrer"></a>
              <img class="thumbnail" id="thumbnailPreview" alt="">
              <div class="videoInfo"><p></p><p></p><p></p><p></p><p></p></div>

              <!-- Playlist info + download zip -->
              <div id="playlistInfo" class="playlistInfo" hidden>
                <span class="pill">Playlist</span>
                <span id="playlistTitle" class="muted"></span>
                <span class="muted">•</span>
                <span><strong id="playlistCount">0</strong> videos</span>
                <button id="downloadPlaylistBtn" class="btn" style="margin-left:auto;">Download playlist (.zip)</button>
              </div>
            </div>
          </div>
        </section>
      </main>

      <!-- Settings Modal -->
      <div id="settingsModal" class="kmodal" aria-hidden="true">
        <div class="kmodal__backdrop"></div>

        <div class="kmodal__dialog" role="dialog" aria-modal="true" aria-labelledby="settingsTitle">
          <button type="button" class="kmodal__close" id="settingsClose" aria-label="Close">×</button>
          <h3 id="settingsTitle">Download settings</h3>

          <div class="kform">
            <div class="kform__row3">
              <label class="kform__field">
                <span>File format</span>
                <select id="optFileFormat">
                  <optgroup label="Video (container)">
                    <option value="auto">Auto (best)</option>
                    <option value="mp4">MP4</option>
                    <option value="mkv">MKV</option>
                    <option value="webm">WEBM</option>
                  </optgroup>
                  <optgroup label="Audio only">
                    <option value="audio:mp3">MP3</option>
                    <option value="audio:m4a">M4A</option>
                    <option value="audio:opus">OPUS</option>
                    <option value="audio:flac">FLAC</option>
                    <option value="audio:wav">WAV</option>
                    <option value="audio:aac">AAC</option>
                    <option value="audio:ogg">OGG</option>
                  </optgroup>
                </select>
              </label>

              <label class="kform__field">
                <span>File name</span>
                <input id="optFileName" type="text" placeholder="%(title)s (leave blank to auto)">
              </label>

              <label class="kform__check kform__field--checkbox">
                <input id="optThumbOnly" type="checkbox">
                <span>Thumbnail only</span>
              </label>
            </div>

            <fieldset class="kform__field">
              <legend>Quality</legend>
              <div class="btnset" id="optQuality">
                <button type="button" data-q="Low">Low</button>
                <button type="button" data-q="Medium">Medium</button>
                <button type="button" data-q="High">High</button>
                <button type="button" data-q="BEST" class="active">BEST</button>
              </div>
            </fieldset>
          </div>

          <div class="kmodal__footer">
            <button type="button" id="settingsSave" class="btn primary">Save</button>
          </div>
        </div>
      </div>

      <!-- Admin Modal (admins only) -->
      <div id="adminModal" class="kmodal" aria-hidden="true">
        <div class="kmodal__backdrop"></div>

        <div class="kmodal__dialog" role="dialog" aria-modal="true" aria-labelledby="adminTitle">
          <button type="button" class="kmodal__close" id="adminClose" aria-label="Close">×</button>
          <h3 id="adminTitle">Admin Test</h3>

          <div class="adminTools">
            <div class="adminTopbar">
              <input id="adminSearch" class="adminSearch" type="search" placeholder="Search email / sub…" autocomplete="off">
              <button id="adminRefresh" class="btn secondary small" type="button">Refresh</button>
            </div>

            <div id="adminUsers" class="adminUsers" aria-live="polite"></div>
          </div>

          <div class="kmodal__footer">
            <button id="adminClose2" class="btn secondary" type="button">Close</button>
          </div>
        </div>
      </div>
      
      <!-- Toast -->
      <div id="toast" class="toast" hidden>
        <div class="title"></div>
        <div class="body"></div>
      </div>
    </div>
  </div>
  
  <div class="footer" style="margin-top:0;">
    <ul>
      <li><a href="https://github.com/Ghilliexyz" target="_blank">GITHUB</a></li>
      <li><a href="https://discordapp.com/users/211851747688185856" target="_blank">DISCORD</a></li>
      <li><a href="https://twitter.com/Ghilliexyz" target="_blank">TWITTER</a></li>
      <li><a href="https://buymeacoffee.com/ghillie" target="_blank">BUY ME A COFFEE</a></li>
    </ul>
  </div>
  
  <script src="/assets/js/kleptos.js" defer></script>
</body>
</html>
